jQuery(document).ready(function($){showViews();function showViews(){var nodeEl=$('.js-view-stats');if(nodeEl.length===0)return!1;var pathName=document.location.pathname;if(!String.prototype.endsWith){Object.defineProperty(String.prototype,'endsWith',{value:function(searchString,position){var subjectString=this.toString();if(position===undefined||position>subjectString.length){position=subjectString.length}
position-=searchString.length;var lastIndex=subjectString.indexOf(searchString,position);return lastIndex!==-1&&lastIndex===position}})}
if(!pathName.endsWith('/'))pathName+'/';if(pathName.endsWith('/amp/')||pathName.endsWith('/amp')){var index=pathName.lastIndexOf('amp');pathName=pathName.slice(0,index)}
var url='https://stats.itc.ua/api/article?url='+pathName;$.ajax({url:url,cache:!1,method:'get',dataType:'json',success:function(response){nodeEl.find('.view-stats__counter').text(response.data.views);nodeEl.removeClass('d-none')},error:function(xhr){}})}
var postID=$('#reactions__container').data('post-id');var ajaxUrl='https://itc.ua/ua/blogs-itc/voiting/';var votedReaction=$.cookie('voted_'+postID);loadVoteResults(postID);$(document).on('click','.reaction-item__button',function(){votedReaction=$.cookie('voted_'+postID);var reaction=$(this).find('img').data('number');if(votedReaction==reaction){$.ajax({url:ajaxUrl,type:'POST',data:{action:'remove_vote',post_id:postID,reaction:reaction},success:function(response){if(response.success){$('#reactions__container').html(response.data.html)}else{alert('Помилка відміни голосу')}}})}else{$.ajax({url:ajaxUrl,type:'POST',data:{action:'submit_vote',post_id:postID,reaction:reaction},success:function(response){if(response.success){$('#reactions__container').html(response.data.html)}else{alert('Голос вже враховано')}}})}});function loadVoteResults(postID){$.ajax({url:ajaxUrl,type:'POST',data:{action:'get_vote_results',post_id:postID},success:function(response){if(response.success){$('#reactions__container').html(response.data.html)}}})}})